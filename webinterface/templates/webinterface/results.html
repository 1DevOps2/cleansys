{% extends "webinterface/mobile_first_body.html" %}
{% load crispy_forms_tags %}

{% block title %}
Putzdienste
{% endblock %}

{% block main %}
        <h1>Die Tabelle um alle Tabellen zu knechten</h1>

        <a class="btn btn-default" href="{% url 'webinterface:config' %}" role="button">
            <span class="glyphicon glyphicon-chevron-left"></span> Zurück</a>
        <br>
        <form method="POST" class="form form-inline">
            {% csrf_token %}
            <input type="submit" class="btn btn-success" name="generate_missing"
                   value="Generate missing assignments">
            <input type="submit" class="btn btn-danger" name="regenerate_all"
                   value="Delete all and regenerate">
            <br>
            <p><i>Putzdienste zu erzeugen kann ein paar Minuten dauern. Bitte habe Geduld.</i></p>
        </form>
        <br>

        <ul class="nav nav-pills" role="tablist">
            {% for page in assignments_by_schedule %}
                {% if page %}
                        <a href="#{{ page.0.schedule.name|slugify }}" aria-controls="home"
                           role="button" class="btn btn-default" data-toggle="tab" style="margin: 2px">
                            {{ page.0.schedule.name }}</a>
                {% endif %}
            {% endfor %}
        </ul>
        <br>


        <div class="tab-content">
            {% for page in assignments_by_schedule %}
                {% if page %}
                    <div role="tabpanel" class="tab-pane {% if forloop.first %}active{% endif %}"
                         id="{{ page.0.schedule.name|slugify }}">
                        <div class="panel panel-primary">
                            <div class="panel-heading">
                                <h3>{{ page.0.schedule.name }}</h3>
                            </div>
                            <div class="panel-body">
                                {% include "webinterface_snippets/schedule_assignment_table.html" %}
                            </div>
                        </div>
                    </div>
                {% else %}
                    Keine Putzdienste
                {% endif %}
            {% empty %}
                Keine Putzpläne
            {% endfor %}
        </div>
        {% comment %}<div class="row">
        {% for page in assignments_by_schedule %}
            {% if page %}
                <div class="col-xs-12 col-sm-4 col-lg-3">
                    <div class="panel panel-primary">
                        <div class="panel-heading">
                            <h3>{{ page.0.schedule.name }}</h3>
                        </div>
                        <div class="panel-body">
                            {% include "webinterface_snippets/schedule_assignment_table.html" %}
                        </div>
                    </div>
                </div>
            {% else %}
                Keine Putzdienste
            {% endif %}
        {% empty %}
            Keine Putzpläne
        {% endfor %}
        </div>{% endcomment %}
{% endblock %}